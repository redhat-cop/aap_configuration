---
- name: Add Credential Types on Controller
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    controller_validate_certs: false
    controller_hostname: controller.nas
    controller_username: admin
    controller_password: secret123
    controller_configuration_enforce_defaults: false

  collections:
    - awx.awx

  pre_tasks:
    - name: Include vars from controller_configs directory
      ansible.builtin.include_vars:
        dir: ./configs
        extensions: ["yml"]

  roles:
    - {role: ../.., when: controller_credential_types is defined}
...
